query($owner: String!, $repo: String!, $cursor: String) {
  rateLimit {
    remaining
    resetAt
  }
  repository(owner: $owner, name: $repo) {
    issues(first: 25, after: $cursor, orderBy: {field: UPDATED_AT, direction: DESC}) {
      totalCount
      pageInfo {
        hasNextPage
        endCursor
      }
      nodes {
        number
        timelineItems(first: 100, itemTypes: [
          ASSIGNED_EVENT,
          UNASSIGNED_EVENT,
          CLOSED_EVENT,
          REOPENED_EVENT,
          LABELED_EVENT,
          UNLABELED_EVENT,
          REFERENCED_EVENT,
          CROSS_REFERENCED_EVENT,
          RENAMED_TITLE_EVENT,
          LOCKED_EVENT,
          UNLOCKED_EVENT,
          PINNED_EVENT,
          UNPINNED_EVENT,
          MILESTONED_EVENT,
          DEMILESTONED_EVENT,
          MARKED_AS_DUPLICATE_EVENT,
          TRANSFERRED_EVENT
        ]) {
          nodes {
            __typename
            ... on AssignedEvent {
              actor { login }
              createdAt
            }
            ... on UnassignedEvent {
              actor { login }
              createdAt
            }
            ... on ClosedEvent {
              actor { login }
              createdAt
            }
            ... on ReopenedEvent {
              actor { login }
              createdAt
            }
            ... on LabeledEvent {
              actor { login }
              createdAt
            }
            ... on UnlabeledEvent {
              actor { login }
              createdAt
            }
            ... on ReferencedEvent {
              actor { login }
              createdAt
            }
            ... on CrossReferencedEvent {
              actor { login }
              createdAt
            }
            ... on RenamedTitleEvent {
              actor { login }
              createdAt
            }
            ... on LockedEvent {
              actor { login }
              createdAt
            }
            ... on UnlockedEvent {
              actor { login }
              createdAt
            }
            ... on PinnedEvent {
              actor { login }
              createdAt
            }
            ... on UnpinnedEvent {
              actor { login }
              createdAt
            }
            ... on MilestonedEvent {
              actor { login }
              createdAt
            }
            ... on DemilestonedEvent {
              actor { login }
              createdAt
            }
            ... on MarkedAsDuplicateEvent {
              actor { login }
              createdAt
            }
            ... on TransferredEvent {
              actor { login }
              createdAt
            }
          }
        }
      }
    }
  }
}